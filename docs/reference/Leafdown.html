<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Leafdown R6 Class — Leafdown • leafdown</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Leafdown R6 Class — Leafdown" />
<meta property="og:description" content="This class acts as a wrapper around the leaflet map. A leaflet map allows the user of the shiny app to:
select shapes / regions
drill down on these selected shapes
drill up


The active bindings of the class provide convenient interfaces between the leafdown map
and other elements in the shiny app e.g. graphs, tables etc.
A leafdown object can only be used in a shiny app." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">leafdown</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/Showcase_electionapp.html">Showcase - Election App</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Leafdown R6 Class</h1>
    
    <div class="hidden name"><code>Leafdown.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This class acts as a wrapper around the leaflet map. A leaflet map allows the user of the shiny app to:</p><ul>
<li><p>select shapes / regions</p></li>
<li><p>drill down on these selected shapes</p></li>
<li><p>drill up</p></li>
</ul>

<p>The active bindings of the class provide convenient interfaces between the leafdown map
and other elements in the shiny app e.g. graphs, tables etc.
A leafdown object can <strong>only</strong> be used in a shiny app.</p>
    </div>



    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl'>
<dt><code>spdfs_list</code></dt><dd><p>The spdfs of all map levels. This is set in <code>initialize</code> and cannot be changed afterwards.
At the moment only two map levels are possible.</p></dd>

<dt><code>map_output_id</code></dt><dd><p>The id from the shiny ui used in the <code>leafletOutput("&lt;&lt;id&gt;&gt;")</code>. Used to observe for _shape_click events.</p></dd>

<dt><code>curr_data</code></dt><dd><p>The metadata and (if available) the corresponding values of all currently displayed shapes.</p></dd>

<dt><code>curr_sel_data</code></dt><dd><p>A <code>reactiveValue</code> containing a data.frame with
the metadata and (if available) the corresponding values of all currently selected shapes.</p></dd>

<dt><code>curr_map_level</code></dt><dd><p>Index of the current map level.
This corresponds to the position of the shapes in the <code>spdfs_list</code>.
(i.e The highest-level is 1, the next is 2 and so on...).
At the moment only two map levels are possible.
curr_sel_ids The ids of the selected shapes of the current level. They will be highlighted on the map.
Calling <code>drill_down</code>, the drill down functionality is executed for these shapes.</p></dd>

<dt><code>curr_spdf</code></dt><dd><p>The spdfs of the current map level.
curr_poly_ids The ids of all polygons of the current map level.
selected_parents The selected spdf shapes from the higher level. (Subset of spdfs_list)
unselected_parents All spdf shapes from the higher level which are not selected. They will be drawn in gray.
(Subset of spdfs_list)</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>Leafdown$new()</code></a></p></li>
<li><p><a href='#method-draw_leafdown'><code>Leafdown$draw_leafdown()</code></a></p></li>
<li><p><a href='#method-get_current_metadata'><code>Leafdown$get_current_metadata()</code></a></p></li>
<li><p><a href='#method-add_data'><code>Leafdown$add_data()</code></a></p></li>
<li><p><a href='#method-drill_down'><code>Leafdown$drill_down()</code></a></p></li>
<li><p><a href='#method-drill_up'><code>Leafdown$drill_up()</code></a></p></li>
<li><p><a href='#method-toggle_shape_select'><code>Leafdown$toggle_shape_select()</code></a></p></li>
<li><p><a href='#method-clone'><code>Leafdown$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Initializes the observer for the maps _shape_click events. This is needed for the shape selection.
Once a shape is clicked, it is added to (or removed from) <code>.curr_sel_ids</code>.
The outline of selected shapes is highlighted via the showGroup (hideGroup) functions.</p>

<p>Initializes the leafdown object.
This will not draw the map. First add data and then call <code>draw_leafdown</code> to draw the map.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>new</span>(<span class='no'>spdfs_list</span>, <span class='no'>map_output_id</span>, <span class='no'>input</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>spdfs_list</code></dt><dd><p>The spdfs of all map levels. This cannot be changed later</p></dd>

<dt><code>map_output_id</code></dt><dd><p>The id from the shiny-ui used in the <code>leafletOutput("&lt;&lt;id&gt;&gt;")</code>. Used to observe for _shape_click events.</p></dd>

<dt><code>input</code></dt><dd><p>The <code>input</code> from the shiny app</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-draw_leafdown"></a></p><h3>Method <code>draw_leafdown()</code></h3>
<p>Draws the leaflet map on the current map level. All unselected parents will be drawn in gray.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>draw_leafdown</span>(<span class='no'>...</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>...</code></dt><dd><p>Additional arguments given to <code><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>leaflet::addPolygons</a></code></p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-get_current_metadata"></a></p><h3>Method <code>get_current_metadata()</code></h3>
<p>Returns the metadata of the shapes from the current maplevel.
This may differ from what is displayed if <code>drill_down</code> has been called but <code>draw_leafdown</code>
has not been (yet).</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>get_current_metadata</span>()</pre><p></div></p>

<h3>Returns</h3>
<p>The current meta-data</p>
<p><hr>
<a id="method-add_data"></a></p><h3>Method <code>add_data()</code></h3>
<p>Adds the data to the currently displayed shapes.
This includes the meta-data AND the values to be visualized in the map.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>add_data</span>(<span class='no'>data</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>data</code></dt><dd><p>The new data existing of the meta-data and the values to display in the map(color)</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-drill_down"></a></p><h3>Method <code>drill_down()</code></h3>
<p>Drills down to the lower level if:
- there is a lower level (for now there are only two levels)
- at least one shape is selected to drill down on
!This will not redraw the map! Also call <code>add_data</code> to add data for the new level and then
  <code>draw_leafdown</code> to redraw the map on the new level</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>drill_down</span>()</pre><p></div></p>

<p><hr>
<a id="method-drill_up"></a></p><h3>Method <code>drill_up()</code></h3>
<p>Drills up to the higher level if:
- there is a higher level (for now there are only two levels)
!This will not redraw the map! Also call <code>add_data</code> to add data for the new level and then
  <code>draw_leafdown</code> to redraw the map on the new level</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>drill_up</span>()</pre><p></div></p>

<p><hr>
<a id="method-toggle_shape_select"></a></p><h3>Method <code>toggle_shape_select()</code></h3>
<p>Selects the shape with the given shape id, or unselects it if it was already selected.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>toggle_shape_select</span>(<span class='no'>shape_id</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>shape_id</code></dt><dd><p>the id of the shape to select, has to be a character and in the current map-level.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>Leafdown</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andreas Hofheinz, Peter Gandenberger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


